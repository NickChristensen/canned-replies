!function(a){function b(){}var c,d;!function(){var a={},b={};c=function(b,c,d){a[b]={deps:c,callback:d}},d=function(c){function e(a){if("."!==a.charAt(0))return a;for(var b=a.split("/"),d=c.split("/").slice(0,-1),e=0,f=b.length;f>e;e++){var g=b[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(b[c])return b[c];if(b[c]={},!a[c])throw new Error("Could not find module "+c);for(var f,g=a[c],h=g.deps,i=g.callback,j=[],k=0,l=h.length;l>k;k++)j.push("exports"===h[k]?f={}:d(e(h[k])));var m=i.apply(this,j);return b[c]=f||m},d.entries=a}(),b.generate=function(){var a=b._gri,c=b._ha;return c(a(32),8)+"-"+c(a(16),4)+"-"+c(16384|a(12),4)+"-"+c(32768|a(14),4)+"-"+c(a(48),12)},b._gri=function(a){return 0>a?0/0:30>=a?0|Math.random()*(1<<a):53>=a?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<a-30)):0/0},b._ha=function(a,b){for(var c=a.toString(16),d=b-c.length,e="0";d>0;d>>>=1,e+=e)1&d&&(c=e+c);return c},function(a){var b,c,d,e={}.toString;Kamino={},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Kamino),exports.Kamino=Kamino):a.Kamino=Kamino,Kamino.VERSION="0.1.0",KaminoException=function(){this.name="KaminoException",this.number=25,this.message="Uncaught Error: DATA_CLONE_ERR: Kamino Exception 25"};var f=new Date(-0xc782b5b800cec);try{f=-109252==f.getUTCFullYear()&&0===f.getUTCMonth()&&1==f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(g){}var h="A"!="A"[0];if(!f){Math.floor}(b={}.hasOwnProperty)||(b=function(a){var c,d={};return(d.__proto__=null,d.__proto__={toString:1},d).toString!=e?b=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(c=d.constructor,b=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])}),d=null,b.call(this,a)}),c=function(a,c){var d,f,g,h,i=0;(d=function(){this.valueOf=0}).prototype.valueOf=0,f=new d;for(g in f)b.call(f,g)&&i++;return d=f=null,i?h=2==i?function(a,c){var d,f={},g="[object Function]"==e.call(a);for(d in a)g&&"prototype"==d||b.call(f,d)||!(f[d]=1)||!b.call(a,d)||c(d)}:function(a,c){var d,f,g="[object Function]"==e.call(a);for(d in a)g&&"prototype"==d||!b.call(a,d)||(f="constructor"===d)||c(d);(f||b.call(a,d="constructor"))&&c(d)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],h=function(a,c){var d,g,h="[object Function]"==e.call(a);for(d in a)h&&"prototype"==d||!b.call(a,d)||c(d);for(g=f.length;d=f[--g];b.call(a,d)&&c(d));}),h(a,c)};var i={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},j=function(a,b){return("000000"+(b||0)).slice(-a)},k=function(a){for(var b,c='"',d=0;b=a.charAt(d);d++)c+='\\"\b\f\n\r	'.indexOf(b)>-1?i[b]:i[b]=" ">b?"\\u00"+j(2,b.charCodeAt(0).toString(16)):b;return c+'"'},l=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},m=function(a,f,g,i,j,n,o){var p,q,r,s,t,u,v,w,x,y,z=f[a],A="";if(z instanceof Error||z instanceof Function)throw new KaminoException;if(l(z))throw new KaminoException;if("object"==typeof z&&z&&(p=e.call(z),"[object Date]"!=p||b.call(z,"toJSON")?"function"==typeof z.toJSON&&("[object Number]"!=p&&"[object String]"!=p&&"[object Array]"!=p||b.call(z,"toJSON"))&&(z=z.toJSON(a)):z=z>-1/0&&1/0>z?z.toUTCString().replace("GMT","UTC"):null),g&&(z=g.call(f,a,z)),null===z)return"null";if(void 0===z)return void 0;if(q=e.call(z),"[object Boolean]"==q)return""+z;if("[object Number]"==q)return z===Number.POSITIVE_INFINITY?"Infinity":z===Number.NEGATIVE_INFINITY?"NInfinity":isNaN(z)?"NaN":""+z;if("[object RegExp]"==q)return y=z.source,A+=z.ignoreCase?"i":"",A+=z.global?"g":"",A+=z.multiline?"m":"",y=k(h?y.split(""):y),A=k(h?A.split(""):A),z="^"+y+A;if("[object String]"==q)return z=k(h?z.split(""):z),"[object Date]"==p&&(z="%"+z),z;if("object"==typeof z){for(u=o.length;u--;)if(o[u]===z)return"&"+u;if(o.push(z),r=[],v=n,n+=j,"[object Array]"==q){for(t=0,u=z.length;u>t;w||(w=!0),t++)s=m(t,z,g,i,j,n,o),r.push(s===d?"null":s);x=w?j?"[\n"+n+r.join(",\n"+n)+"\n"+v+"]":"["+r.join(",")+"]":"[]"}else c(i||z,function(a){var b=m(a,z,g,i,j,n,o);b!==d&&r.push(k(h?a.split(""):a)+":"+(j?" ":"")+b),w||(w=!0)}),x=w?j?"{\n"+n+r.join(",\n"+n)+"\n"+v+"}":"{"+r.join(",")+"}":"{}";return x}};Kamino.stringify=function(a,b,c){var d,f,g;if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==e.call(b))f=b;else if("[object Array]"==e.call(b)){g={};for(var h,i=0,j=b.length;j>i;h=b[i++],("[object String]"==e.call(h)||"[object Number]"==e.call(h))&&(g[h]=1));}if(c)if("[object Number]"==e.call(c)){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else"[object String]"==e.call(c)&&(d=c.length<=10?c:c.slice(0,10));return m("",(h={},h[""]=a,h),f,g,d,"",[])};var n,o,p,q=String.fromCharCode,r={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},s=function(){throw n=o=null,SyntaxError()},t=function(a){a=a||"";var b,c,d,e,f=o,g=f.length;for(b=a,n++;g>n;)if(c=f[n]," ">c)s();else if("\\"==c)if(c=f[++n],'\\"/btnfr'.indexOf(c)>-1)b+=r[c],n++;else if("u"==c){for(d=++n,e=n+4;e>n;n++)c=f[n],c>="0"&&"9">=c||c>="a"&&"f">=c||c>="A"&&"F">=c||s();b+=q("0x"+f.slice(d,n))}else s();else{if('"'==c)break;b+=c,n++}return'"'==f[n]?(n++,b):void s()},u=function(){for(var a,b,c,d,e,f,g,h=o,i=h.length;i>n;)if(a=h[n],"	\r\n ".indexOf(a)>-1)n++;else{if("{}[]:,".indexOf(a)>-1)return n++,a;if('"'==a)return t("@");if("%"==a){if(n++,a=h[n],'"'==a)return e=t(),new Date(e);s()}else if("^"==a){if(n++,a=h[n],'"'==a&&(f=t(),a=h[n],'"'==a))return g=t(),new RegExp(f,g);s()}else if("&"==a){if(n++,a=h[n],a>="0"&&"9">=a)return n++,p[a];s()}else{if(b=n,"-"==a&&(d=!0,a=h[++n]),a>="0"&&"9">=a){for("0"==a&&(a=h[n+1],a>="0"&&"9">=a)&&s(),d=!1;i>n&&(a=h[n],a>="0"&&"9">=a);n++);if("."==h[n]){for(c=++n;i>c&&(a=h[c],a>="0"&&"9">=a);c++);c==n&&s(),n=c}if(a=h[n],"e"==a||"E"==a){for(a=h[++n],("+"==a||"-"==a)&&n++,c=n;i>c&&(a=h[c],a>="0"&&"9">=a);c++);c==n&&s(),n=c}return+h.slice(b,n)}if(d&&s(),"true"==h.slice(n,n+4))return n+=4,!0;if("false"==h.slice(n,n+5))return n+=5,!1;if("Infinity"==h.slice(n,n+8))return n+=8,1/0;if("NInfinity"==h.slice(n,n+9))return n+=9,-(1/0);if("NaN"==h.slice(n,n+3))return n+=3,0/0;if("null"==h.slice(n,n+4))return n+=4,null;s()}}return"$"},v=function(a){var b,c;if("$"==a&&s(),"string"==typeof a){if("@"==a[0])return a.slice(1);if("["==a){for(b=[],p[p.length]=b;a=u(),"]"!=a;c||(c=!0))c&&(","==a?(a=u(),"]"==a&&s()):s()),","==a&&s(),b.push(v("string"==typeof a&&h?a.split(""):a));return b}if("{"==a){for(b={},p[p.length]=b;a=u(),"}"!=a;c||(c=!0)){c&&(","==a?(a=u(),"}"==a&&s()):s()),(","==a||"string"!=typeof a||"@"!=a[0]||":"!=u())&&s();var d=u();b[a.slice(1)]=v("string"==typeof d&&h?d.split(""):d)}return b}s()}return a},w=function(a,b,c){var e=x(a,b,c);e===d?delete a[b]:a[b]=e},x=function(a,b,d){var f,g=a[b];if("object"==typeof g&&g)if("[object Array]"==e.call(g))for(f=g.length;f--;)w(g,f,d);else c(g,function(a){w(g,a,d)});return d.call(a,b,g)};Kamino.parse=function(a,b){var c,d;return n=0,o=""+a,p=[],h&&(o=a.split("")),c=v(u()),"$"!=u()&&s(),n=o=null,b&&"[object Function]"==e.call(b)?x((d={},d[""]=c,d),"",b):c},Kamino.clone=function(a){return Kamino.parse(Kamino.stringify(a))}}(this),function(a){function c(a){return a&&"[object Function]"===Object.prototype.toString.call(a)}function d(){return"undefined"==typeof Worker&&"undefined"==typeof f}var e=a,f=e.Window,g=!1,h=[].slice;if(g||!e.MessageChannel){var i=function(a){return"undefined"!=typeof window&&e instanceof f&&(!c(e.Worker)||!(a instanceof Worker))},j=function(a){if(m.verbose){var b=h.apply(arguments);b.unshift("MCNP: "),console.log.apply(console,b)}},k={},l=e.MessagePort=function(a){this._entangledPortUuid=null,this.destinationUrl=null,this._listeners={},this._messageQueue=[],this._messageQueueEnabled=!1,this._currentTarget=null,this.uuid=a||b.generate(),k[this.uuid]=this,this.log("created")};l.prototype={start:function(){var a,b=this;setTimeout(function(){for(b.log("draining "+b._messageQueue.length+" queued messages");b._messageQueueEnabled&&(a=b._messageQueue.shift());)b.dispatchEvent(a)}),this._messageQueueEnabled=!0,this.log("started")},close:function(){this._messageQueueEnabled=!1,this._entangledPortUuid&&(this._getEntangledPort()._entangledPortUuid=null,this._entangledPortUuid=null)},postMessage:function(a){var b,c=this._getEntangledPort(),d=this._currentTarget;return c?void(d?(b=m.encodeEvent(a,[c],!0),i(d)?(this.log("posting message from window to window",a,this.destinationUrl),d.postMessage(b,this.destinationUrl)):(this.log("posting message from or to worker",a),d.postMessage(b))):(this.log("not connected, queueing message",a),c._enqueueEvent(m._messageEvent(a,[c],!0)))):void this.log("not entangled, discarding message",a)},addEventListener:function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)},removeEventListener:function(a,b){if(this._listeners[a]instanceof Array)for(var c=this._listeners[a],d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}},dispatchEvent:function(a){var b=this._listeners.message;if(b)for(var c=0;c<b.length;c++)b[c].call(this,a)},_enqueueEvent:function(a){this._messageQueueEnabled?this.dispatchEvent(a):this._messageQueue.push(a)},_getPort:function(a,b,c){var d=function(a){var b=k[a]||m._createPort(a);return b},f=d(a.uuid);if(f._entangledPortUuid=a._entangledPortUuid,f._getEntangledPort()._entangledPortUuid=f.uuid,f._currentTarget=b.source||b.currentTarget||e,"null"===b.origin?f.destinationUrl="*":f.destinationUrl=b.origin,c)for(var g=0;g<a._messageQueue.length;g++)f._messageQueue.push(a._messageQueue[g]);return f},_getEntangledPort:function(){return this._entangledPortUuid?k[this._entangledPortUuid]||m._createPort(this._entangledPortUuid):null},log:function(){if(m.verbose){var a=h.apply(arguments);a.unshift("Port",this.uuid),j.apply(null,a)}}};var m=e.MessageChannel=function(){var a,b=m._createPort(),c=m._createPort();return b._entangledPortUuid=c.uuid,c._entangledPortUuid=b.uuid,a={port1:b,port2:c},m.log(a,"created"),a};m.log=function(a){if(m.verbose){var b=["Chnl"],c=h.call(arguments,1);a.port1&&a.port2?b.push(a.port1.uuid,a.port2.uuid):a.forEach(function(a){b.push(a._entangledPortUuid)}),b.push.apply(b,c),j.apply(null,b)}},m._createPort=function(){var a=arguments,b=function(){return l.apply(this,a)};return b.prototype=l.prototype,new b},m.encodeEvent=function(a,b,c){for(var d,e,f=new Array(b.length),g=0;g<b.length;++g)f[g]=m._strippedPort(b[g]);return e={event:m._messageEvent(a,f,c)},d=Kamino.stringify(e)},m._messageEvent=function(a,b,c){return{data:a,ports:b,messageChannel:c}},m._strippedPort=function(a){if(a){for(var b,c,d,e=[],f=0;f<a._messageQueue.length;++f){b=a._messageQueue[f],c=b.ports||[],d=[];for(var g,h=0;h<c.length;++h)g=c[h],d.push({uuid:g.uuid,_entangledPortUuid:g._entangledPortUuid});e.push({data:b.data,messageChannel:b.messageChannel,ports:d})}return{uuid:a.uuid,_entangledPortUuid:a._entangledPortUuid,_messageQueue:e}}},m.decodeEvent=function(a,b){var c={data:null,ports:[]},d=Kamino.parse(a.data),e=d.event,f=e.ports;if(e){if(f)for(var g=0;g<f.length;g++)c.ports.push(l.prototype._getPort(f[g],a,b));c.data=e.data,c.source=a.source,c.messageChannel=e.messageChannel}return c};var n=function(a,b){var c;try{c=m.decodeEvent(a,b)}catch(d){if(!(d instanceof SyntaxError))throw d;c=a}return c},o=function(a){var b=n(a,!0);b.messageChannel&&m.propagateEvent(b)},p=function(a){a.addEventListener?a.addEventListener("message",o,!1):a.attachEvent&&a.attachEvent("onmessage",o)},q=function(a){var b,c,d,e,f;a.addEventListener?(c="addEventListener",e="removeEventListener",f="message"):a.attachEvent&&(c="attachEvent",e="detachEvent",f="onmessage"),b=a[c],d=a[e],a[c]=function(){var a,c=Array.prototype.slice.call(arguments),d=c[1],e=this;c[0]===f&&(a=function(a){var b=n(a);b.messageChannel||d.call(e,b)},d.messageHandlerWrapper=a,c[1]=a),b.apply(this,c)},a[e]=function(){var a=Array.prototype.slice.call(arguments),b=a[1];a[0]===f&&(a[1]=b.messageHandlerWrapper,delete b.messageHandlerWrapper),a[1]&&d.apply(this,a)}};if(m.propagateEvent=function(a){var b,c,d;if(a.messageChannel){b=a.ports;for(var e=0;e<b.length;e++)c=b[e],d=c._getEntangledPort(),c._currentTarget&&d._currentTarget?d.postMessage(a.data):c._enqueueEvent(a)}},m.reset=function(){k={}},p(e),f){f.postMessage=function(a,b,c,d){var e,f;if(d=d||[],e=m.encodeEvent(b,d,!1),d)for(var g=0;g<d.length;g++)f=d[g]._getEntangledPort(),f._currentTarget||(f._currentTarget=a,f.destinationUrl=c);m.log(d,"handshake window",a),a.postMessage(e,c)};var r;if(window.addEventListener)r=window;else{if(!window.attachEvent)throw"We couldn't find a method to attach an event handler.";r=f.prototype}q(r)}else q(e);if(e.Worker){var s,t=Worker;t.prototype.addEventListener?s=t.prototype.addEventListener:t.prototype.attachEvent&&(s=t.prototype.attachEvent),e.Worker=function(){var a=new t(arguments[0]),b=s;return b.call(a,"message",o),a},Worker.prototype=t.prototype,q(Worker.prototype)}else d()&&(e.Worker={});e.Worker&&(e.Worker.postMessage=function(a,b,c){for(var d,e=m.encodeEvent(b,c,!1),f=0;f<c.length;f++)d=c[f]._getEntangledPort(),d._currentTarget=a;m.log(c,"handshake worker",a),a.postMessage(e)})}else f?f.postMessage=function(a,b,c,d){d=d||[],a.postMessage(b,c,d)}:e.Worker={postMessage:function(a,b,c){a.postMessage(b,c)}},e.Worker&&(e.Worker.postMessage=function(a,b,c){a.postMessage(b,c)})}(this),c("rsvp/all",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){if("[object Array]"!==Object.prototype.toString.call(a))throw new TypeError("You must pass an array to all.");return new d(function(b,c){function d(a){return function(b){e(a,b)}}function e(a,c){g[a]=c,0===--h&&b(g)}var f,g=[],h=a.length;0===h&&b([]);for(var i=0;i<a.length;i++)f=a[i],f&&"function"==typeof f.then?f.then(d(i),c):e(i,f)})}var d=a.Promise;b.all=c}),c("rsvp/async",["exports"],function(b){"use strict";function c(){return function(){process.nextTick(f)}}function d(){var a=new j(f),b=document.createElement("div");return a.observe(b,{attributes:!0}),window.addEventListener("unload",function(){a.disconnect(),a=null},!1),function(){b.setAttribute("drainQueue","drainQueue")}}function e(){return function(){k.setTimeout(f,1)}}function f(){for(var a=0;a<l.length;a++){var b=l[a],c=b[0],d=b[1];c(d)}l=[]}function g(a,b){var c=l.push([a,b]);1===c&&h()}var h,i="undefined"!=typeof window?window:{},j=i.MutationObserver||i.WebKitMutationObserver,k="undefined"!=typeof a?a:this,l=[];h="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?c():j?d():e(),b.async=g}),c("rsvp/config",["rsvp/async","exports"],function(a,b){"use strict";var c=a.async,d={};d.async=c,b.config=d}),c("rsvp/defer",["rsvp/promise","exports"],function(a,b){"use strict";function c(){var a={resolve:void 0,reject:void 0,promise:void 0};return a.promise=new d(function(b,c){a.resolve=b,a.reject=c}),a}var d=a.Promise;b.defer=c}),c("rsvp/events",["exports"],function(a){"use strict";var b=function(a,b){this.type=a;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},c=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c][0]===b)return c;return-1},d=function(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b},e={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a},on:function(a,b,e){var f,g,h=d(this);for(a=a.split(/\s+/),e=e||this;g=a.shift();)f=h[g],f||(f=h[g]=[]),-1===c(f,b)&&f.push([b,e])},off:function(a,b){var e,f,g,h=d(this);for(a=a.split(/\s+/);f=a.shift();)b?(e=h[f],g=c(e,b),-1!==g&&e.splice(g,1)):h[f]=[]},trigger:function(a,c){var e,f,g,h,i,j=d(this);if(e=j[a])for(var k=0;k<e.length;k++)f=e[k],g=f[0],h=f[1],"object"!=typeof c&&(c={detail:c}),i=new b(a,c),g.call(h,i)}};a.EventTarget=e}),c("rsvp/hash",["rsvp/defer","exports"],function(a,b){"use strict";function c(a){var b=0;for(var c in a)b++;return b}function d(a){var b={},d=e(),f=c(a);0===f&&d.resolve({});var g=function(a){return function(b){h(a,b)}},h=function(a,c){b[a]=c,0===--f&&d.resolve(b)},i=function(a){d.reject(a)};for(var j in a)a[j]&&"function"==typeof a[j].then?a[j].then(g(j),i):h(j,a[j]);return d.promise}var e=a.defer;b.hash=d}),c("rsvp/node",["rsvp/promise","rsvp/all","exports"],function(a,b,c){"use strict";function d(a,b){return function(c,d){c?b(c):a(arguments.length>2?Array.prototype.slice.call(arguments,1):d)}}function e(a){return function(){var b,c,e=Array.prototype.slice.call(arguments),h=this,i=new f(function(a,d){b=a,c=d});return g(e).then(function(e){e.push(d(b,c));try{a.apply(h,e)}catch(f){c(f)}}),i}}var f=a.Promise,g=b.all;c.denodeify=e}),c("rsvp/promise",["rsvp/config","rsvp/events","exports"],function(a,b,c){"use strict";function d(a){return e(a)||"object"==typeof a&&null!==a}function e(a){return"function"==typeof a}function f(a){k.onerror&&k.onerror(a.detail)}function g(a,b){a===b?i(a,b):h(a,b)||i(a,b)}function h(a,b){var c,f=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(d(b)&&(f=b.then,e(f)))return f.call(b,function(d){return c?!0:(c=!0,void(b!==d?g(a,d):i(a,d)))},function(b){return c?!0:(c=!0,void j(a,b))}),!0}catch(h){return j(a,h),!0}return!1}function i(a,b){k.async(function(){a.trigger("promise:resolved",{detail:b}),a.isFulfilled=!0,a.fulfillmentValue=b})}function j(a,b){k.async(function(){a.trigger("promise:failed",{detail:b}),a.isRejected=!0,a.rejectedReason=b})}var k=a.config,l=b.EventTarget,m=function(a){var b=this,c=!1;if("function"!=typeof a)throw new TypeError("You must pass a resolver function as the sole argument to the promise constructor");if(!(b instanceof m))return new m(a);var d=function(a){c||(c=!0,g(b,a))},e=function(a){c||(c=!0,j(b,a))};this.on("promise:failed",function(a){this.trigger("error",{detail:a.detail})},this),this.on("error",f);try{a(d,e)}catch(h){e(h)}},n=function(a,b,c,d){var f,i,k,l,m=e(c);if(m)try{f=c(d.detail),k=!0}catch(n){l=!0,i=n}else f=d.detail,k=!0;h(b,f)||(m&&k?g(b,f):l?j(b,i):"resolve"===a?g(b,f):"reject"===a&&j(b,f))};m.prototype={constructor:m,isRejected:void 0,isFulfilled:void 0,rejectedReason:void 0,fulfillmentValue:void 0,then:function(a,b){this.off("error",f);var c=new this.constructor(function(){});return this.isFulfilled&&k.async(function(b){n("resolve",c,a,{detail:b.fulfillmentValue})},this),this.isRejected&&k.async(function(a){n("reject",c,b,{detail:a.rejectedReason})},this),this.on("promise:resolved",function(b){n("resolve",c,a,b)}),this.on("promise:failed",function(a){n("reject",c,b,a)}),c},fail:function(a){return this.then(null,a)}},l.mixin(m.prototype),c.Promise=m}),c("rsvp/reject",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){return new d(function(b,c){c(a)})}var d=a.Promise;b.reject=c}),c("rsvp/resolve",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){return new d(function(b,c){b(a)})}var d=a.Promise;b.resolve=c}),c("rsvp/rethrow",["exports"],function(b){"use strict";function c(a){throw d.setTimeout(function(){throw a}),a}var d="undefined"==typeof a?this:a;b.rethrow=c}),c("rsvp",["rsvp/events","rsvp/promise","rsvp/node","rsvp/all","rsvp/hash","rsvp/rethrow","rsvp/defer","rsvp/config","rsvp/resolve","rsvp/reject","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a,b){t[a]=b}var m=a.EventTarget,n=b.Promise,o=c.denodeify,p=d.all,q=e.hash,r=f.rethrow,s=g.defer,t=h.config,u=i.resolve,v=j.reject;k.Promise=n,k.EventTarget=m,k.all=p,k.hash=q,k.rethrow=r,k.defer=s,k.denodeify=o,k.configure=l,k.resolve=u,k.reject=v}),c("oasis",["rsvp","oasis/logger","oasis/version","oasis/util","oasis/config","oasis/sandbox","oasis/xhr","oasis/events","oasis/service","oasis/connect","oasis/iframe_adapter","oasis/webworker_adapter","oasis/inline_adapter","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(){this.packages={},this.requestId=0,this.oasisId="oasis"+ +new Date,this.consumers={},this.services=[],this.ports={},this.handlers={},this.receivedPorts=!1,this.configuration=new u,this.events=new x,this.didCreate()}var p=a,q=b["default"],r=c["default"],s=d.assert,t=d.delegate,u=e["default"],v=f["default"],w=g.xhr,x=h["default"],y=i["default"],z=j.connect,A=j.connectCapabilities,B=j.portFor,C=k["default"],D=l["default"],E=m["default"];o.Version=r,o.Service=o.Consumer=y,o.RSVP=p,o.reset=function(){o.adapters={iframe:new C,webworker:new D,inline:new E}},o.reset(),o.prototype={logger:q,log:function(){this.logger.log.apply(this.logger,arguments)},on:t("events","on"),off:t("events","off"),trigger:t("events","trigger"),didCreate:function(){},xhr:w,createSandbox:function(a){return new v(this,a)},register:function(a){s(a.capabilities,"You are trying to register a package without any capabilities. Please provide a list of requested capabilities, or an empty array ([])."),this.packages[a.url]=a},configure:function(a,b){this.configuration[a]=b},autoInitializeSandbox:function(){if("undefined"!=typeof window){if(/PhantomJS/.test(navigator.userAgent))return;window.parent&&window.parent!==window&&o.adapters.iframe.connectSandbox(this)}else o.adapters.webworker.connectSandbox(this)},connect:z,connectCapabilities:A,portFor:B},n["default"]=o}),c("oasis/base_adapter",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/connect","oasis/message_channel","exports"],function(a,b,c,d,e,f,g){"use strict";function h(){this._unsupportedCapabilities=[]}var i=b["default"],j=c.mustImplement,k=d.addEventListener,l=d.removeEventListener,m=d.a_indexOf,n=d.a_filter,o=(e.connectCapabilities,f.PostMessageMessageChannel);h.prototype={initializeSandbox:j("BaseAdapter","initializeSandbox"),name:j("BaseAdapter","name"),unsupportedCapabilities:function(){return this._unsupportedCapabilities},addUnsupportedCapability:function(a){this._unsupportedCapabilities.push(a)},filterCapabilities:function(a){var b=this._unsupportedCapabilities;return n.call(a,function(a){var c=m.call(b,a);return-1===c})},createChannel:function(a){var b=new o(a);return b.port1.start(),b},environmentPort:function(a,b){return b.port1},sandboxPort:function(a,b){return b.port2},proxyPort:function(a,b){return b},connectSandbox:function(a,b){function c(e){e.data.isOasisInitialization&&(l(a,"message",c),d.initializeOasisSandbox(e,b))}var d=this;i.log("Sandbox listening for initialization message"),k(a,"message",c),d.oasisLoaded(b)},initializeOasisSandbox:function(a,b){var c=this;b.configuration.eventCallback(function(){i.log("sandbox: received initialization message."),b.connectCapabilities(a.data.capabilities,a.ports),c.didConnect(b)})},createInitializationMessage:function(a){return{isOasisInitialization:!0,capabilities:a._capabilitiesToConnect}},oasisLoadedMessage:"oasisSandboxLoaded",sandboxInitializedMessage:"oasisSandboxInitialized"},g["default"]=h}),c("oasis/config",["exports"],function(a){"use strict";function b(){this.eventCallback=function(a){a()},this.allowSameOrigin=!1,this.reconnect="verify"}a["default"]=b}),c("oasis/connect",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/message_channel","exports"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){var d=a.ports[b];d?(o.log(a.oasisId,"sandbox: found port, setting up '"+b+"'"),c.setupCapability(d),c.promise?c.promise.then(function(){d.start()}).fail(n.rethrow):d.start()):a.receivedPorts?(o.log("No port was sent for capability '"+b+"'"),c.rejectCapability()):(o.log("No port found, saving handler for '"+b+"'"),a.handlers[b]=c)}function h(a,b,c){return"object"==typeof a?k(this,a.consumers):b?l(this,a,b,c):m(this,a)}function i(a,b){var c=this;q.call(a,function(a,d){var e=c.handlers[a],f=new r(c,b[d]);e&&(o.log("Invoking handler for '"+a+"'"),n.resolve(e.setupCapability(f)).then(function(){f.start()}).fail(n.rethrow)),c.ports[a]=f});for(var d in c.handlers)c.ports[d]||c.handlers[d].rejectCapability();this.receivedPorts=!0}function j(a){var b=this.ports[a];return p(b,"You asked for the port for the '"+a+"' capability, but the environment did not provide one."),b}function k(a,b){function c(b,c){return function(d){var e=new b(d);a.consumers[c]=e,e.initialize(d,c)}}function d(a){return function(){b[a].prototype.error()}}for(var e in b)g(a,e,{setupCapability:c(b[e],e),rejectCapability:d(e)})}function l(a,b,c,d){o.log("Connecting to '"+b+"' with callback."),g(a,b,{setupCapability:function(a){c(a)},rejectCapability:function(){d&&d()}})}function m(a,b){o.log("Connecting to '"+b+"' with promise.");var c=n.defer();return g(a,b,{promise:c.promise,setupCapability:function(a){return c.resolve(a),c.promise},rejectCapability:function(){c.reject()}}),c.promise}var n=a,o=b["default"],p=c.assert,q=d.a_forEach,r=e.PostMessagePort;f.registerHandler=g,f.connect=h,f.connectCapabilities=i,f.portFor=j}),c("oasis/events",["exports"],function(a){"use strict";function b(){this.listenerArrays={}}var c=Array.prototype.slice;b.prototype={on:function(a,b){var c=this.listenerArrays[a]=this.listenerArrays[a]||[];c.push(b)},off:function(a,b){var c=this.listenerArrays[a];if(c)for(var d=0;d<c.length;++d)if(c[d]===b){c.splice(d,1);break}},clear:function(a){delete this.listenerArrays[a]},trigger:function(a){var b=this.listenerArrays[a];if(b)for(var d=c.call(arguments,1),e=0;e<b.length;++e)b[e].apply(null,d)}},a["default"]=b}),c("oasis/iframe_adapter",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/base_adapter","exports"],function(a,c,d,e,f,g){"use strict";function h(a,b){var c,d=document.createElement("iframe");if((a.configuration.allowSameOrigin&&void 0!==d.sandbox||void 0===d.sandbox)&&(c=document.createElement("a"),c.href=b,!c.host||c.protocol===window.location.protocol&&c.host===window.location.host))throw new Error("Security: iFrames from the same host cannot be sandboxed in older browsers and is disallowed.  For HTML5 browsers supporting the `sandbox` attribute on iframes, you can add the `allow-same-origin` flagonly if you host the sandbox on a separate domain.")}function i(a,b){function c(){a.onerror(new Error("Cannot reconnect null origins unless `reconnect` is set to 'any'.  `reconnect: 'verify' requires `allowSameOrigin: true`"))}var d,e;if(a.firstLoad||"any"===a.options.reconnect)return!0;if(a.oasis.configuration.allowSameOrigin&&"null"!==b.origin){if(d=document.createElement("a"),e=document.createElement("a"),d.href=a.options.url,e.href=b.origin,e.protocol===d.protocol&&e.host===d.host)return!0;c()}else c()}var j=a,k=c["default"],l=(d.assert,d.extend),m=(e.a_forEach,e.addEventListener),n=e.removeEventListener,o=e.a_map,p=f["default"],q=l(p,{initializeSandbox:function(a){var c=a.options,d=document.createElement("iframe"),e=["allow-scripts"];a.oasis.configuration.allowSameOrigin&&e.push("allow-same-origin"),c&&c.sandbox&&(c.sandbox.forms&&e.push("allow-forms"),c.sandbox.popups&&e.push("allow-popups")),d.name=a.options.url+"?uuid="+b.generate(),d.sandbox=e.join(" "),d.seamless=!0,c.width?d.width=c.width:c.height&&(d.height=c.height),d.errorHandler=function(b){if(b.data.sandboxException){try{if(b.source!==d.contentWindow)return}catch(c){return}a.onerror(b.data.sandboxException)}},m(window,"message",d.errorHandler),h(a.oasis,a.options.url),d.src=a.options.url,k.log("Initializing sandbox "+d.name),a._waitForLoadDeferred().resolve(new j.Promise(function(b,c){d.initializationHandler=function(c){if(c.data===a.adapter.sandboxInitializedMessage){try{if(c.source!==d.contentWindow)return}catch(e){return}n(window,"message",d.initializationHandler),a.oasis.configuration.eventCallback(function(){k.log("container: iframe sandbox has initialized (capabilities connected)"),b(a)})}},m(window,"message",d.initializationHandler)})),a.el=d,d.oasisLoadHandler=function(b){if(b.data===a.adapter.oasisLoadedMessage){try{if(b.source!==d.contentWindow)return}catch(c){return}k.log("container: iframe sandbox has loaded Oasis"),i(a,b)&&a.createAndTransferCapabilities(),"none"===a.options.reconnect&&n(window,"message",d.oasisLoadHandler)}},m(window,"message",d.oasisLoadHandler)},startSandbox:function(a){var b=document.head||document.documentElement.getElementsByTagName("head")[0];b.appendChild(a.el)},terminateSandbox:function(a){var b=a.el;a.terminated=!0,b.loadHandler&&n(b,"load",b.loadHandler),n(window,"message",b.initializationHandler),n(window,"message",b.oasisLoadHandler),b.parentNode&&(k.log("Terminating sandbox ",a.el.name),b.parentNode.removeChild(b)),a.el=null},connectPorts:function(a,b){var c=o.call(b,function(a){return a.port}),d=this.createInitializationMessage(a);a.terminated||Window.postMessage(a.el.contentWindow,d,"*",c)},connectSandbox:function(a){return p.prototype.connectSandbox.call(this,window,a)},oasisLoaded:function(){window.parent.postMessage(this.oasisLoadedMessage,"*",[])},didConnect:function(){window.parent.postMessage(this.sandboxInitializedMessage,"*",[])},name:function(a){return a.el.name}});g["default"]=q}),c("oasis/inline_adapter",["rsvp","oasis/logger","oasis/util","oasis/config","oasis/shims","oasis/xhr","oasis/base_adapter","exports"],function(a,b,c,d,e,f,g,h){"use strict";var i=a,j=b["default"],k=(c.assert,c.extend),l=c.noop,m=(d.configuration,e.a_forEach,e.a_map),n=f.xhr,o=g["default"],p=k(o,{initializeSandbox:function(a){a.el=document.createElement("div");a.sandboxedOasis=new Oasis;a.sandboxedOasis.sandbox=a,i.resolve().then(function(){a.createAndTransferCapabilities()})},startSandbox:function(a){var b=document.body||document.documentElement.getElementsByTagName("body")[0];b.appendChild(a.el)},terminateSandbox:function(a){var b=a.el;b.parentNode&&(j.log("Terminating sandbox ",a.el.name),b.parentNode.removeChild(b)),a.el=null},connectPorts:function(a,b){var c=m.call(b,function(a){return a.port}),d=this.createInitializationMessage(a),e={data:d,ports:c};this.connectSandbox(a.sandboxedOasis,e)},fetchResource:function(a,b){var c=this;return n(a,{dataType:"text"},b).then(function(a){return c.wrapResource(a)}).fail(i.rethrow)},wrapResource:function(a){return new Function("oasis",a)},connectSandbox:function(a,b){return this.initializeOasisSandbox(b,a)},oasisLoaded:l,didConnect:function(a){function b(b){return j.log("sandbox: inline sandbox initialized"),b(a),a.sandbox}function c(){return new i.Promise(function(c,e){c(d.fetchResource(a.sandbox.options.url,a).then(b))})}var d=this;return a.sandbox._waitForLoadDeferred().resolve(c().fail(i.rethrow))}});h["default"]=p}),c("oasis/logger",["exports"],function(a){"use strict";function b(){this.enabled=!1}b.prototype={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},log:function(){if(c.enabled)if("undefined"!=typeof console&&"function"==typeof console.log)console.log.apply(console,arguments);else if("undefined"!=typeof console&&"object"==typeof console.log)try{switch(arguments.length){case 1:console.log(arguments[0]);break;case 2:console.log(arguments[0],arguments[1]);break;default:console.log(arguments[0],arguments[1],arguments[2])}}catch(a){}}};var c=new b;a["default"]=c}),c("oasis/message_channel",["rsvp","oasis/util","exports"],function(a,b,c){"use strict";function d(a,b){}function e(a){return a.oasisId+"-"+a.requestId++}function f(a){}var g=a,h=b.extend,i=b.mustImplement;c.OasisPort=d,d.prototype={on:i("OasisPort","on"),all:i("OasisPort","all"),off:i("OasisPort","off"),send:i("OasisPort","send"),start:i("OasisPort","start"),close:i("OasisPort","close"),request:function(a){var b=this.oasis,c=this,d=[].slice.call(arguments,1);return new g.Promise(function(f,g){var h=e(b),i=function(){c.off("@response:"+a,j),c.off("@errorResponse:"+a,k)},j=function(a){a.requestId===h&&(i(),f(a.data))},k=function(a){a.requestId===h&&(i(),g(a.data))};c.on("@response:"+a,j,c),c.on("@errorResponse:"+a,k,c),c.send("@request:"+a,{requestId:h,args:d})})},onRequest:function(a,b,c){var d=this;this.on("@request:"+a,function(e){var f=e.requestId,h=(e.args,new g.Promise(function(d,f){var g=b.apply(c,e.args);void 0!==g?d(g):f("@request:"+a+" ["+e.requestId+"] did not return a value.  If you want to return a literal `undefined` return `RSVP.resolve(undefined)`");

}));h.then(function(b){d.send("@response:"+a,{requestId:f,data:b})},function(b){var c=b;b instanceof Error&&(c={message:b.message,stack:b.stack}),d.send("@errorResponse:"+a,{requestId:f,data:c})})})}},f.prototype={start:i("OasisMessageChannel","start")};var j=h(f,{initialize:function(a){this.channel=new MessageChannel,this.port1=new k(a,this.channel.port1),this.port2=new k(a,this.channel.port2)},start:function(){this.port1.start(),this.port2.start()},destroy:function(){this.port1.close(),this.port2.close(),delete this.port1,delete this.port2,delete this.channel}});c.PostMessageMessageChannel=j;var k=h(d,{initialize:function(a,b){this.oasis=a,this.port=b,this._callbacks=[]},on:function(a,b,c){function d(d){d.data.type===a&&e.configuration.eventCallback(function(){return b.call(c,d.data.data)})}var e=this.oasis;this._callbacks.push([b,d]),this.port.addEventListener("message",d)},all:function(a,b){function c(c){d.configuration.eventCallback(function(){a.call(b,c.data.type,c.data.data)})}var d=this.oasis;this.port.addEventListener("message",c)},off:function(a,b){for(var c,d=0,e=this._callbacks.length;e>d;d++)c=this._callbacks[d],c[0]===b&&this.port.removeEventListener("message",c[1])},send:function(a,b){this.port.postMessage({type:a,data:b})},start:function(){this.port.start()},close:function(){for(var a,b=0,c=this._callbacks.length;c>b;b++)a=this._callbacks[b],this.port.removeEventListener("message",a[1]);this._callbacks=[],this.port.close()}});c.PostMessagePort=k}),c("oasis/sandbox",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/message_channel","oasis/iframe_adapter","exports"],function(a,b,c,d,e,f,g){"use strict";var h=a,i=b["default"],j=c.assert,k=c.uniq,l=c.reverseMerge,m=d.a_forEach,n=d.a_reduce,o=(d.a_filter,e.OasisPort),p=f["default"],q=function(a,b){b=l(b||{},{reconnect:a.configuration.reconnect});var c=b.reconnect;j("none"===c||"verify"===c||"any"===c,"`reconnect` must be one of 'none', 'verify' or 'any'.  '"+c+"' is invalid."),this.connections={},this.wiretaps=[],this.oasis=a;var d=a.packages[b.url],e=b.capabilities;e||(j(d,"You are trying to create a sandbox from an unregistered URL without providing capabilities. Please use Oasis.register to register your package or pass a list of capabilities to createSandbox."),e=d.capabilities),d=d||{},this.adapter=b.adapter||new p,this._capabilitiesToConnect=this._filterCapabilities(e),this.envPortDefereds={},this.sandboxPortDefereds={},this.channels={},this.capabilities={},this.options=b,this.firstLoad=!0;this.promisePorts(),this.adapter.initializeSandbox(this)};q.prototype={waitForLoad:function(){return this._waitForLoadDeferred().promise},wiretap:function(a){this.wiretaps.push(a)},connect:function(a){var b=this.envPortDefereds[a].promise;return j(b,"Connect was called on '"+a+"' but no such capability was registered."),b},createAndTransferCapabilities:function(){this.firstLoad||this.promisePorts(),this.createChannels(),this.connectPorts(),this.firstLoad=!1},promisePorts:function(){m.call(this._capabilitiesToConnect,function(a){this.envPortDefereds[a]=h.defer(),this.sandboxPortDefereds[a]=h.defer()},this)},createChannels:function(){var a=this,b=this.options.services||{},c=this.channels;m.call(this._capabilitiesToConnect,function(d){i.log("container: Will create port for '"+d+"'");var e,f,g=b[d];if(g instanceof o)f=this.adapter.proxyPort(this,g),this.capabilities[d]=g;else{e=c[d]=this.adapter.createChannel(a.oasis);var h=this.adapter.environmentPort(this,e),j=this.adapter.sandboxPort(this,e);i.log("container: Wiretapping '"+d+"'"),h.all(function(a,b){m.call(this.wiretaps,function(c){c(d,{type:a,data:b,direction:"received"})})},this),m.call(this.wiretaps,function(a){var b=h.send;h.send=function(c,e){a(d,{type:c,data:e,direction:"sent"}),b.apply(h,arguments)}}),g&&(i.log("container: Creating service for '"+d+"'"),g=new g(h,this),g.initialize(h,d),a.oasis.services.push(g),this.capabilities[d]=g),f=j,this.envPortDefereds[d].resolve(h)}i.log("container: Port created for '"+d+"'"),this.sandboxPortDefereds[d].resolve(f)},this)},destroyChannels:function(){for(var a in this.channels)this.channels[a].destroy(),delete this.channels[a];this.channels=[]},connectPorts:function(){var a=this,b=n.call(this._capabilitiesToConnect,function(b,c){return b.concat(a.sandboxPortDefereds[c].promise)},[]);h.all(b).then(function(b){i.log("container: All "+b.length+" ports created.  Transferring them."),a.adapter.connectPorts(a,b)}).fail(h.rethrow)},start:function(a){this.adapter.startSandbox(this,a)},terminate:function(){var a=this;if(!this.isTerminated){this.isTerminated=!0,this.adapter.terminateSandbox(this),this.destroyChannels();for(var b=0;b<a.oasis.services.length;b++)a.oasis.services[b].destroy(),delete a.oasis.services[b];a.oasis.services=[]}},onerror:function(a){throw a},name:function(){return this.adapter.name(this)},_filterCapabilities:function(a){return k.call(this.adapter.filterCapabilities(a))},_waitForLoadDeferred:function(){return this._loadDeferred||(this._loadDeferred=h.defer()),this._loadDeferred}},g["default"]=q}),c("oasis/sandbox_init",["exports"],function(a){"use strict";function b(){if("undefined"!=typeof window){if(/PhantomJS/.test(navigator.userAgent))return;window.parent&&window.parent!==window&&this.adapters.iframe.connectSandbox(this)}else this.adapters.webworker.connectSandbox(this)}a["default"]=b}),c("oasis/service",["oasis/shims","exports"],function(a,b){"use strict";function c(a,b){function c(a){return function(){return a.apply(f,arguments)}}var d,e,f=this;this.sandbox=b,this.port=a;for(d in this.events)e=this.events[d],a.on(d,c(e));for(d in this.requests)e=this.requests[d],a.onRequest(d,c(e))}var d=a.o_create;c.prototype={initialize:function(){},error:function(){},destroy:function(){},send:function(){return this.port.send.apply(this.port,arguments)},request:function(){return this.port.request.apply(this.port,arguments)}},c.extend=function e(a){function b(){b.prototype.init&&b.prototype.init.call(this),c.apply(this,arguments)}var c=this;b.extend=e;var f=b.prototype=d(this.prototype);for(var g in a)f[g]=a[g];return b},b["default"]=c}),c("oasis/shims",["exports"],function(a){"use strict";function b(a,b){if(f.prototype=a,a=new f,b){f.prototype=a;for(var c in b)f.prototype[c]=b[c].value;a=new f}return f.prototype=null,a}function c(a,b,c){return a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):void 0}function d(a,b,c){return a.removeEventListener?a.removeEventListener(b,c):a.detachEvent?a.detachEvent("on"+b,c):void 0}function e(a){return a&&Function.prototype.toString.call(a).indexOf("[native code]")>-1}var f=function(){};a.o_create=b,a.addEventListener=c,a.removeEventListener=d;var g=e(Array.prototype.forEach)?Array.prototype.forEach:function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments[1],e=0;c>e;e++)e in b&&a.call(d,b[e],e,b)};a.a_forEach=g;var h=e(Array.prototype.reduce)?Array.prototype.reduce:function(a,b){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d=0,e=this.length>>>0,f=!1;for(1<arguments.length&&(c=b,f=!0);e>d;++d)this.hasOwnProperty(d)&&(f?c=a(c,this[d],d,this):(c=this[d],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return c};a.a_reduce=h;var i=e(Array.prototype.map)?Array.prototype.map:function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(b&&(c=b),d=new Array(g),e=0;g>e;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d};a.a_map=i;var j=e(Array.prototype.indexOf)?Array.prototype.indexOf:function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1};a.a_indexOf=j;var k=e(Array.prototype.filter)?Array.prototype.filter:function(a){if(!this)throw new TypeError;{var b=Object(this);b.length>>>0}if("function"!=typeof a)throw new TypeError;var c=[],d=arguments[1];for(var e in b)b.hasOwnProperty(e)&&a.call(d,b[e],e,b)&&c.push(b[e]);return c};a.a_filter=k}),c("oasis/util",["oasis/shims","exports"],function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b)}function d(){}function e(a,b){return function(){throw new Error("Subclasses of "+a+" must implement "+b)}}function f(a,b){function c(){a.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}c.prototype=j(a.prototype);for(var d in b)b.hasOwnProperty(d)&&(c.prototype[d]=b[d]);return c}function g(a,b){return function(){var c=this[a];return c[b].apply(c,arguments)}}function h(){var a={};return k.call(this,function(b){var c=!a.hasOwnProperty(b);return a[b]=!0,c})}function i(a,b){for(var c in b)b.hasOwnProperty(c)&&(c in a||(a[c]=b[c]));return a}var j=a.o_create,k=a.a_filter;b.assert=c,b.noop=d,b.mustImplement=e,b.extend=f,b.delegate=g,b.uniq=h,b.reverseMerge=i}),c("oasis/version",["exports"],function(a){"use strict";a["default"]="0.4.0"}),c("oasis/webworker_adapter",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/base_adapter","exports"],function(a,c,d,e,f,g){"use strict";var h=a,i=c["default"],j=(d.assert,d.extend),k=(e.a_forEach,e.addEventListener),l=e.removeEventListener,m=f["default"],n=j(m,{type:"js",initializeSandbox:function(a){var c=new Worker(a.options.url);c.name=a.options.url+"?uuid="+b.generate(),a.worker=c,c.errorHandler=function(b){b.data.sandboxException&&a.onerror(b.data.sandboxException)},k(c,"message",c.errorHandler),a._waitForLoadDeferred().resolve(new h.Promise(function(b,d){c.initializationHandler=function(d){a.oasis.configuration.eventCallback(function(){d.data===a.adapter.sandboxInitializedMessage&&(l(c,"message",c.initializationHandler),i.log("worker sandbox initialized"),b(a))})},k(c,"message",c.initializationHandler)})),c.loadHandler=function(b){a.oasis.configuration.eventCallback(function(){b.data===a.adapter.oasisLoadedMessage&&(l(c,"message",c.loadHandler),i.log("worker sandbox initialized"),a.createAndTransferCapabilities())})},k(c,"message",c.loadHandler)},startSandbox:function(a){},terminateSandbox:function(a){var b=a.worker;l(b,"message",b.loadHandler),l(b,"message",b.initializationHandler),a.worker.terminate()},connectPorts:function(a,b){var c=b.map(function(a){return a.port}),d=this.createInitializationMessage(a);Worker.postMessage(a.worker,d,c)},connectSandbox:function(a){return m.prototype.connectSandbox.call(this,self,a)},name:function(a){return a.worker.name},oasisLoaded:function(){postMessage(this.oasisLoadedMessage,[])},didConnect:function(){postMessage(this.sandboxInitializedMessage,[])}});g["default"]=n}),c("oasis/xhr",["rsvp","oasis/util","exports"],function(a,b,c){"use strict";function d(a){var b=a.dataType;return b&&q[b]?q[b]:q["*"]}function e(a,b){a.setRequestHeader("Accepts",d(b))}function f(a){return a.status}function g(){return 200}function h(a,b){if(b){var c=o.call(arguments,2);c.unshift(a),b.trigger.apply(b,c)}}function i(a,b,c){return!c&&this instanceof Oasis&&(c=this),b||(b=p),new m.Promise(function(d,e){var f=new j;f.open("get",a,!0),k(f,b),b.timeout&&(f.timeout=b.timeout),f.onload=function(){h("xhr.load",c,a,b,f);var g=l(f);g>=200&&300>g?d(f.responseText):e(f)},f.onprogress=n,f.ontimeout=function(){h("xhr.timeout",c,a,b,f),e(f)},f.onerror=function(){h("xhr.error",c,a,b,f),e(f)},h("xhr.send",c,a,b,f),f.send()})}var j,k,l,m=a,n=b.noop,o=Array.prototype.slice,p={},q={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};try{"withCredentials"in new XMLHttpRequest?(j=XMLHttpRequest,k=e,l=f):"undefined"!=typeof XDomainRequest&&(j=XDomainRequest,k=n,l=g)}catch(r){"undefined"!=typeof XDomainRequest&&(j=XDomainRequest,k=n,l=g)}c.xhr=i}),function(a,b){"use strict";function c(a){return{name:a.name,message:a.message,stack:a.stack}}function d(a,b){return(a||[]).concat(b||[]).filter(function(a,b,c){return c.indexOf(a)===b})}function e(){var b=!a.opener,c=!!(a.top&&a!=a.top||a.parent&&a!=a.parent);return b&&c}function f(a){var b;try{b="object"==typeof a&&null!==a&&1===a.nodeType&&/^I?FRAME$/.test(a.nodeName||"")&&!!a.hasAttribute&&!!a.getAttribute&&!!a.setAttribute}catch(c){b=!1}return b}function g(b){var d;try{d=a.frameElement,f(d)||(d=null)}catch(e){d=null,"function"==typeof b&&b(c(e))}return d}function h(a){var b;try{b=document.domain||null}catch(d){b=null,"function"==typeof a&&a(c(d))}return b}function i(){return{forms:null,pointerLock:null,popups:null,sameOrigin:!0,scripts:!0,topNavigation:null}}function j(a){var b,c=null;return null===a?c=i():"string"==typeof a&&(b=a.replace(/^\s+|\s+$/g,"").toLowerCase().split(/\s+/),c={forms:-1!==b.indexOf("allow-forms"),pointerLock:-1!==b.indexOf("allow-pointer-lock"),popups:-1!==b.indexOf("allow-popups"),sameOrigin:-1!==b.indexOf("allow-same-origin"),scripts:-1!==b.indexOf("allow-scripts"),topNavigation:-1!==b.indexOf("allow-top-navigation")}),c}function k(a,b){var c,e,f,g,h=!1;if(a&&"object"==typeof a&&b&&"object"==typeof b)for(c=d(Object.keys(a),Object.keys(b)),h=!0,e=0,f=c.length;f>e;e++)if(g=c[e],!a.hasOwnProperty(g)||!b.hasOwnProperty(g)||a[g]!==b[g]){h=!1;break}return h}function l(a,c){var d,e,g,h,i={sandboxed:b,sandboxAllowances:b,unsandboxable:b,resandboxable:b,errors:[]};if(f(a)){try{i.sandboxed=a.hasAttribute("sandbox")}catch(l){i.sandboxed=null,"function"==typeof c&&c(l)}if(i.sandboxed)try{d=a.getAttribute("sandbox")||""}catch(l){d=null,"function"==typeof c&&c(l)}else null===i.sandboxed&&(d=null);if((null===d||"string"==typeof d)&&(i.sandboxAllowances=j(d)),i.sandboxed)try{a.removeAttribute("sandbox"),i.unsandboxable=!a.hasAttribute("sandbox")}catch(l){i.unsandboxable=!1,"function"==typeof c&&c(l)}if(i.unsandboxable&&"string"==typeof d)try{a.setAttribute("sandbox",d),e=a.hasAttribute("sandbox")}catch(l){e=!1,"function"==typeof c&&c(l)}if(e&&i.sandboxAllowances)try{g=a.getAttribute("sandbox")||""}catch(l){g=null,"function"==typeof c&&c(l)}else null===e&&(g=null);(null===g||"string"==typeof g)&&(g=j(g)),e&&(h=null,i.sandboxAllowances&&g&&(h=k(i.sandboxAllowances,g))),i.resandboxable=h}return i}function m(){var a=this;return a instanceof m?(a._initialState=a.detect(),void(a._unsandboxState=null)):new m}var n=Array.prototype.slice;m.prototype.detect=function(){var a,d,f,i={framed:!1,crossOrigin:null,sandboxed:null,sandboxAllowances:b,unsandboxable:b,resandboxable:b,sandboxable:b,errors:[]},j=function(a){i.errors.push(c(a))},k=function(a){d=c(a),i.errors.push(d)};try{i.framed=e(),i.framed?(a=g(k),null!=a?(i.crossOrigin=!1,f=l(a,j),i.sandboxed=f.sandboxed,i.sandboxAllowances=f.sandboxAllowances,i.unsandboxable=f.unsandboxable,i.resandboxable=f.resandboxable):(i.crossOrigin=!0,i.sandboxed=null,i.sandboxAllowances={forms:null,pointerLock:null,popups:null,sameOrigin:null,scripts:!0,topNavigation:null},i.unsandboxable=!1,i.resandboxable=!1,null===h(j)?(i.sandboxed=!0,i.sandboxAllowances.sameOrigin=!1):d&&("SecurityError"!==d.name?i.crossOrigin=null:/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(d.message.toLowerCase())&&(i.sandboxed=!0,i.sandboxAllowances.sameOrigin=!0))),i.sandboxable=i.resandboxable||i.framed===!0&&i.crossOrigin===!1&&(i.sandboxed===!1||i.sandboxAllowances.sameOrigin)||!1):(i.crossOrigin=b,i.sandboxed=b,i.errors=b)}catch(m){j(m)}return i},m.prototype.unsandbox=function(){var a,b,c=!1,d=this,e=d._initialState;if(e.framed===!1)c=!0;else if(e.crossOrigin===!1&&(a=d.detect(),c=a.sandboxed===!1,a.sandboxed&&a.unsandboxable&&(d._unsandboxState=a,b=g(function(){c=!1}))))try{b.removeAttribute("sandbox"),c=!b.hasAttribute("sandbox")}catch(f){c=!1}return c},m.prototype.resandbox=function(){var a=!1,b=this;return null!=b._unsandboxState&&(a=b.sandbox(b._unsandboxState.sandboxAllowances)),a===!0&&(b._unsandboxState=null),a},m.prototype.sandbox=function(a){var b,c,e,f,i,j,k,l=!1,m=this,n=m._initialState,o=[];if(a&&"object"==typeof a&&n.framed&&n.crossOrigin!==!1&&(e=m.detect(),(e.sandboxed===!1&&e.sandboxable||e.sandboxed&&e.unsandboxable)&&(f=e.sandboxAllowances,c=d(Object.keys(a),Object.keys(f||{})),c.forEach(function(b){(a[b]===!0||null==a[b]&&f&&f[b]===!0)&&o.push("allow-"+b.replace(/[A-Z]/g,"-$1").toLowerCase())}),o.length>0&&(j=g())))){i=-1===o.indexOf("allow-same-origin")||-1===o.indexOf("allow-scripts"),b=o.sort().join(" ");try{j.setAttribute("sandbox",b),l=i}catch(p){l=!1}if(j=g())try{k=(j.getAttribute("sandbox")||"").replace(/^\s+|\s+$/g,"").split(/\s+/).sort().join(" "),l=k===b||i&&(""===k||null===h())}catch(p){l=i}}return l},m.prototype.reload=function(){var a,b,c,d,e=!1,f=this,h=f._initialState;if(h.framed&&h.crossOrigin===!1&&(a=g()))try{a.parentNode&&a.parentNode.ownerDocument&&(b=n.call(a.attributes).map(function(a){return{name:a.name,value:a.value}}),c=a.parentNode.ownerDocument.createElement("iframe"),b.forEach(function(a){c.setAttribute(a.name,a.value)}),d=a.parentNode.replaceChild(c,a),e=a===d)}catch(i){e=!1}return e},a.sandblaster=new m}(window),c("spiceworks-sdk",["spiceworks-sdk/card","spiceworks-sdk/login","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"];c.Card=d,c.Login=e}),c("spiceworks-sdk/card-service",["rsvp","exports"],function(a,b){"use strict";function c(a,b){this.promise=a.oasis.connect(b),this.name=b}var d=a;c.prototype={trigger:function(a,b){return this.promise.then(function(c){c.send(a,b)}),this},on:function(a,b,c){var d=c||this;return this.promise.then(function(c){c.on(a,b,d)}),this},request:function(){var a=this,b=arguments;return d.Promise(function(c,d){a.promise.then(function(a){return a.request.apply(a,b)},function(b){d({errors:[{title:"Connection Error",details:"Could not connect to service "+a.name+". Make sure the service name is correct and that your App has access to this service.",data:b}]})}).then(function(a){c(a)},function(a){d(a)})})}},b["default"]=c}),c("spiceworks-sdk/card",["oasis","./card-service","rsvp","exports"],function(a,b,c,d){"use strict";function e(a){this.options=a=a||{},this.oasis=i,this.cardServices={},this.activationDeferred=h.defer(),this.activationDeferred.promise.fail(h.rethrow),this.services("environment").on("activate",function(a){this.activationDeferred.resolve(a)},this)}var f=a["default"],g=b["default"],h=c,i=new f;i.autoInitializeSandbox(),e.prototype={services:function(a){return this.cardServices[a]||(this.cardServices[a]=new g(this,a)),this.cardServices[a]},onActivate:function(a){var b=this;b.activationDeferred.promise.then(function(c){return a.call(b,c)})}},d["default"]=e}),c("spiceworks-sdk/login",["rsvp","./card","exports"],function(a,b,c){"use strict";function d(a){if(a.source===this.targetWindow&&a.origin===m&&"access_token"===a.data.messageType&&a.data.clientId===this.appUid){var b=a.data.accessToken;this.targetWindow.close(),k[this.appUid]=b,this.deferred&&this.deferred.resolve(b)}}function e(a,b){return m+b+"?response_type=token&client_id="+a+"&redirect_uri="+encodeURIComponent("/oauth/callback")}function f(a){var b=(new j).services("login");b.request("access_token",{oauth_uid:a.appUid}).then(function(b){k[a.appUid]=b.token,a.deferred.resolve(b.token)},function(b){a.deferred.reject(b)})}function g(a){var b=e(a.appUid,"/oauth/sign_in");a.targetWindow=window.open(b,null,l)}function h(a){if(a=a||{},"undefined"==typeof a.appUid)throw new Error("'appUid' must be provided in args");this.appUid=a.appUid,this.targetWindow=null,this.deferred=null,window.addEventListener("message",d.bind(this),!1)}var i=a,j=b["default"],k={},l="width=460,height=420,menubar=no,toolbar=no,status=no,scrollbars=no",m="https://accounts.spiceworks.com",n=function(){var a=sandblaster.detect();return a.framed&&(a.sandboxed||null===a.sandboxed)}();h.prototype={login:function(){return this.deferred=i.defer(),k[this.appUid]?this.deferred.resolve(k[this.appUid]):n?f(this):g(this),this.deferred.promise},create:function(){this.deferred=i.defer();var a=e(this.appUid,"/oauth/users/new");return this.targetWindow=window.open(a,null,l),this.deferred.promise},request:function(a,b){var c=[].slice.call(arguments).splice(1);return this[a].apply(this,c)}},c["default"]=h}),window.SW=d("spiceworks-sdk")}(self);
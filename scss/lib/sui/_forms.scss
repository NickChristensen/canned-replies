// Forms.scss
// Base styles for various input types, form layouts, and states
// -------------------------------------------------------------

// Mixin for form field states
@mixin formFieldState($textColor: #555, $borderColor: #ccc, $backgroundColor: #f5f5f5) {
  // Set the text color
  > label,
  .help-block,
  .help-inline {
    color: $textColor;
  }
  // Style inputs accordingly
  input,
  select,
  textarea {
    background:#fff;
    color: $textColor;
    border-width:1px;
    border-style:solid;
    border-color: $borderColor;
    &:focus {
      border-color: darken($borderColor, 10%);
      @include box-shadow-inset();
    }
  }
  // Give a small background color for input-prepend/-append
  .input-prepend .add-on,
  .input-append .add-on {
    color: $textColor;
    background-color: $backgroundColor;
    border-color: $textColor;
  }
}

// GENERAL STYLES
// --------------
.sui-opt-in { // sui namespace all the table styles
  // Make all forms have space below them
  form {
    margin: 0;
  }

  fieldset {
    padding: 0;
    margin: 0;
    border: 0;
  }

  // Groups of fields with labels on top (legends)
  legend {
    display: block;
    width: 100%;
    padding: 0;
    margin-bottom: $baseLineHeight * 1.5;
    font-size: $baseFontSize * 1.5;
    line-height: $baseLineHeight * 2;
    color: $textColor;
    border: 0;
    border-bottom: 1px solid $borderColor;
  }

  // Set font for forms
  label,
  input,
  button,
  select,
  textarea {
    @include default-font($baseFontSize, normal, $baseLineHeight);
  }

  // Identify controls by their labels
  label {
    display: block;
    margin-bottom: 5px;
    color: $secondaryTextColor;
  }

  label.checkbox, label.radio {
    color: $textColor;
  }

  label[disabled="disabled"], label[disabled="disabled"].checkbox, label[disabled="disabled"].radio {
    color: $secondaryTextColor; 
  }

  // Inputs, Textareas, Selects
  input, input.text,
  textarea,
  select,
  input.editor_field,
  input.file,
  a.fake_input,
  .uneditable-input {
    background:#fff;
    display: inline-block;
    height: $baseLineHeight;
    padding: 2px 5px;
    margin-bottom: 9px;
    font-size: $baseFontSize;
    line-height: $baseLineHeight;
    color: $textColor;
    border:1px solid $inputBorder;
    @include border-radius(3px);
    @include box-shadow( $inputBoxShadow );
  }
  .uneditable-textarea {
    width: auto;
    height: auto;
  }

  // Inputs within a label
  label input,
  label textarea,
  label select {
    display: block;
  }

  // Mini reset for unique input types
  input[type="image"],
  input[type="checkbox"],
  input[type="radio"] {
    width: auto;
    height: auto;
    padding: 0;
    margin: 3px 0;
    *margin-top: 0; /* IE7 */
    line-height: normal;
    border: 0;
    cursor: pointer;
    @include border-radius(0);
  }

  // Reset the file input to browser defaults
  input[type="file"] {
    padding: initial;
    line-height: initial;
    border: initial;
    background-color: $inputFill;
    background-color: initial;
    @include box-shadow(none);
  }

  // Help out input buttons
  input[type="button"],
  input[type="reset"],
  input[type="submit"] {
    width: auto;
    height: auto;
  }

  // Set the height of select and file controls to match text inputs
  select,
  input[type="file"] {
    height: 28px; /* In IE7, the height of the select element cannot be changed by height, only font-size */
    *margin-top: 4px; /* For IE7, add top margin to align select with labels */
    line-height: 28px;
  }

  // Chrome on Linux and Mobile Safari need background-color
  select {
    width: 220px; // default input width + 10px of padding that doesn't get applied
    background-color: $inputFill;
  }

  // Make multiple select elements height not fixed
  select[multiple],
  select[size] {
    height: auto;
  }

  // Remove shadow from image inputs
  input[type="image"] {
    @include box-shadow(none);
  }

  // Make textarea height behave
  textarea {
    height: auto;
  }

  // Hidden inputs
  input[type="hidden"] {
    display: none;
  }



  // CHECKBOXES & RADIOS
  // -------------------

  // Indent the labels to position radios/checkboxes as hanging
  .radio,
  .checkbox {
    padding-left: 18px;
  }
  .radio input[type="radio"],
  .checkbox input[type="checkbox"] {
    float: left;
    margin-left: -18px;
  }

  // Move the options list down to align with labels
  .controls > .radio:first-child,
  .controls > .checkbox:first-child {
    padding-top: 5px; // has to be padding because margin collaspes
  }

  // Radios and checkboxes on same line
  .radio.inline,
  .checkbox.inline {
    display: inline-block;
    margin-bottom: 0;
    vertical-align: middle;
  }
  .radio.inline + .radio.inline,
  .checkbox.inline + .checkbox.inline {
    margin-left: 10px; // space out consecutive inline controls
  }
  // But don't forget to remove their padding on first-child
  .controls > .radio.inline:first-child,
  .controls > .checkbox.inline:first-child {
    padding-top: 0;
  }



  // FOCUS STATE
  // -----------

  input,
  textarea {
    @include box-shadow($inputBoxShadow);
    $transition: border linear .2s, box-shadow linear .2s;
    @include transition($transition);
  }
  input:focus,
  textarea:focus {
    border-color: rgba(82,168,236,.8);
    $shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
    @include box-shadow($shadow);
    outline: 0;
    outline: thin dotted \9; /* IE6-8 */
  }
  input[type="file"]:focus,
  input[type="checkbox"]:focus,
  select:focus {
    @include box-shadow(none); // override for file inputs
    @include tab-focus();
  }



  // INPUT SIZES
  // -----------

  // General classes for quick sizes
  .input-mini       { width: 60px; }
  .input-small      { width: 90px; }
  .input-medium     { width: 150px; }
  .input-large      { width: 210px; }
  .input-xlarge     { width: 270px; }
  .input-xxlarge    { width: 530px; }

  // Grid style input sizes
  input[class*="span"],
  select[class*="span"],
  textarea[class*="span"],
  .uneditable-input {
    float: none;
    margin-left: 0;
  }

  // DISABLED STATE
  // --------------

  // Disabled and read-only inputs
  input[disabled],
  select[disabled],
  textarea[disabled],
  input[readonly],
  select[readonly],
  textarea[readonly] {
    background-color: #f5f5f5;
    border-color: #ddd;
    @include box-shadow(none);
  }




  // FORM FIELD FEEDBACK STATES
  // --------------------------

  // Error
  .control-group.error {
    @include formFieldState($errorText, $errorBorder, $errorFill);

    .controls {
      .help-inline { font-size:11px; }
      label.checkbox { background-color: $errorFill; padding-left:21px; /* 18px normal padding + 3 to show fill on left */ }
    }
  }

  // REMOVED - NOT APPROVED FOR PRODUCTION
  // Warning
  // .control-group.warning {
  //   @include formFieldState($warningText, $warningText, $warningFill);
  // }
  // Success
  // .control-group.success {
  //   @include formFieldState($successText, $successText, $successFill);
  // }

  // HTML5 invalid states
  // Shares styles with the .control-group.error above
  input:focus:required:invalid,
  textarea:focus:required:invalid,
  select:focus:required:invalid {
    color: $errorText;
    border-color: $errorBorder;
    &:focus {
      border-color: darken($errorBorder, 10%);    
    }
  }

  // FORM BUTTON CONTAINER
  // ------------
  .form-actions {
    margin-bottom: $baseLineHeight;
  }

  // For text that needs to appear as an input but should not be an input
  .uneditable-input {
    display: block;
    background-color: $inputFill;
    border-color: #eee;
    @include box-shadow( $inputBoxShadow );
    cursor: not-allowed;
  }

  // Placeholder text gets special styles; can't be bundled together though for some reason
  @include placeholder($placeholderTextColor);



  // HELP TEXT
  // ---------
  .help-block {
    margin-top: 5px;
    margin-bottom: 0;
    color: $secondaryTextColor;
  }

  .help-inline {
    display: inline-block;
    margin-bottom: 9px;
    vertical-align: middle;
    padding-left: 5px;
  }



  // INPUT GROUPS
  // ------------

  // Allow us to put symbols and text within the input field for a cleaner look
  // .input-prepend,
  // .input-append {
  //   margin-bottom: 5px;
  //   @include clearfix(); // Clear the float to prevent wrapping
  //   input,
  //   .uneditable-input {
  //     @include border-radius(0 3px 3px 0);
  //     &:focus {
  //       position: relative;
  //       z-index: 2;
  //     }
  //   }
  //   .uneditable-input {
  //     border-left-color: #ccc;
  //   }
  //   .add-on {
  //     float: left;
  //     display: block;
  //     width: auto;
  //     min-width: 16px;
  //     height: $baseLineHeight;
  //     margin-right: -1px;
  //     padding: 4px 5px;
  //     font-weight: normal;
  //     line-height: $baseLineHeight;
  //     color: $textSecondaryColor;
  //     text-align: center;
  //     text-shadow: 0 1px 0 #FFF;
  //     background-color: #f5f5f5;
  //     border: 1px solid #ccc;
  //     @include border-radius(3px 0 0 3px);
  //   }
  //   .active {
  //     background-color: lighten(green, 30);
  //     border-color: green;
  //   }
  // }
  // .input-prepend {
  //   .add-on {
  //     *margin-top: 1px; /* IE6-7 */
  //   }
  // }
  // .input-append {
  //   input,
  //   .uneditable-input {
  //     float: left;
  //     @include border-radius(3px 0 0 3px);
  //   }
  //   .uneditable-input {
  //     border-right-color: #ccc;    
  //   }
  //   .add-on {
  //     margin-right: 0;
  //     margin-left: -1px;
  //     @include border-radius(0 3px 3px 0);
  //   }
  //   input:first-child {
  //     // In IE7, having a hasLayout container (from clearfix's zoom:1) can make the first input
  //     // inherit the sum of its ancestors' margins.
  //     *margin-left: -160px;
  // 
  //     &+.add-on {
  //       *margin-left: -21px;
  //     }
  //   }
  // }



  // SEARCH FORM
  // -----------
  // TODO - BUILD OUT THE SEARCH BOX CONTROL
  .search-query {
    padding-left: 14px;
    padding-right: 14px;
    margin-bottom: 0; // remove the default margin on all inputs
    @include border-radius(14px);
  }



  // HORIZONTAL & VERTICAL FORMS
  // ---------------------------
  // Common properties
  // -----------------

  .form-search,
  .form-inline,
  .form-horizontal {
    input,
    textarea,
    select,
    .help-inline,
    .uneditable-input {
      display: inline-block;
      margin-bottom: 0;
    }
  }
  .form-search label,
  .form-inline label,
  .form-search .input-append,
  .form-inline .input-append,
  .form-search .input-prepend,
  .form-inline .input-prepend {
    display: inline-block;
  }
  // Make the prepend and append add-on vertical-align: middle;
  .form-search .input-append .add-on,
  .form-inline .input-prepend .add-on,
  .form-search .input-append .add-on,
  .form-inline .input-prepend .add-on {
    vertical-align: middle;
  }

  // Margin to space out fieldsets
  .control-group {
    margin-bottom: $baseLineHeight / 2;
  }

  // Horizontal-specific styles
  // --------------------------
  // TODO - DO WE WANT TO KEEP THIS OR MOVE TO USING THE FLEXGRID FOR 
  // HORIZONTAL FORM LAYOUTS?
  .form-horizontal {
    // Legend collapses margin, so we're relegated to padding
    legend + .control-group {
      margin-top: $baseLineHeight;
      -webkit-margin-top-collapse: separate;
    }
    // Increase spacing between groups
    .control-group {
      margin-bottom: $baseLineHeight;
      @include clearfix();
    }
    // Float the labels left
    .control-group > label {
      float: left;
      width: 140px;
      padding-top: 3px;
      text-align: right;
    }
    // Move over all input controls and content
    .controls {
      margin-left: 160px;
      *margin-left:0px;
    }
    // Move over buttons in .form-actions to align with .controls
    .form-actions {
      padding-left: 160px;
    }
  }
  
  // A label-less variation on the vertical form
  // --------------------------
  .form-hidden-labels {
    .control-group > label {
      display: none;
    }
  }
  
}

// DROPDOWN MENUS
// --------------

/////////////////////////////////////////////////////
// "Caret" down arrow for dropdown trigger
/////////////////////////////////////////////////////
.caret {
  display: inline-block;

  width: 0;
  height: 0;
  vertical-align: top;

  text-indent: -99999px;
  content: "\2193";
  border-left:  4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid;
  border-top-color: $linkColor;
}
.sui-bttn > .caret {
  border-top-color: $darkIconColor;
}
[disabled] .caret,
.disabled .caret {
  border-top:   4px solid $buttonBorder;
}

%shared-dropdown-content-styles {
  position: absolute;
  z-index: $zindexDropdown;

  padding: 4px 2px;
  max-height: 500px;
  overflow-y: auto;
  min-width: 100px;

  list-style: none;
  background-color: $contentFill;
  border: 1px solid $borderColor;
  @include border-radius(3px);
  @include box-shadow(0 5px 10px rgba(0,0,0,.2));
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding;
  background-clip: padding-box;
}


/////////////////////////////////////////////////////
// SuiCollapse
/////////////////////////////////////////////////////
.sui-reveal[disabled] .sui-reveal_trigger {
  color: $buttonBorder !important; /* !important b/c of .sui-bttn { color !important } */
  cursor: not-allowed;
}

.sui-reveal_trigger {
  cursor: pointer;
}

.sui-reveal_content {
  display: none;

  &.is-shown {
    display: block;
  }
}

/////////////////////////////////////////////////////
// Partial Reveal
/////////////////////////////////////////////////////
.sui-reveal_content--partially-shown {
  overflow: hidden;
  display: block;
  position: relative;

  &.is-shown {
    height: auto;
  }
  &.is-hidden:after {
    content: "";
    display: block;
    position: absolute;
    width: 100%;
    height: 70px;
    background: rgba(0, 0, 0, 0) linear-gradient(rgba(255, 255, 255, 0), white) repeat-x;
    bottom: 0px;
    left: 0px;
    margin: 0;
    padding: 0;
  }
}

//////////////////////////////////////////////////////////////////////
// Shared by new (BEM) Sui Dropdown, legacy dropdown & Sui Collapse
//////////////////////////////////////////////////////////////////////
%shared-dropdown-entry-styles {
  display: block;

  min-width: 100px;
  padding: 3px 20px 3px 15px;

  white-space: nowrap;
  font-weight: normal;
  line-height: 18px;
  color: $textColor;
  cursor: pointer;
}

%shared-dropdown-active-entry-styles {
  text-decoration: none;
  background-color: $hoverColor;
  color: $textColor;
}

%shared-open-button-trigger-styles {
  color: $textColor;
  background: $hoverColor;
}

%shared-dropdown-divider-styles {
  height: 1px;
  margin: 5px 1px;
  overflow: hidden;
  //background-color: #e5e5e5;
  border-bottom: 1px solid $borderColor;
}

%shared-dropdown-caret-styles {
  margin-top: 7px;
  margin-left: 2px;
}


/////////////////////////////////////////////////////
// New (BEM) Sui Dropdown
/////////////////////////////////////////////////////
.sui-dropdown {
  position: relative;
  display: inline;

  &.is-open {
    .sui-dropdown_trigger.sui-bttn {
      @extend %shared-open-button-trigger-styles;
    }
  }
}

.sui-dropdown_trigger {
  cursor: pointer;

  &.sui-bttn {
    @extend %shared-button-trigger-styles;
  }

  .caret {
    @extend %shared-dropdown-caret-styles;
  }

  .sui-dropdown[disabled] & {
    color: $buttonBorder;
    cursor: not-allowed;
    text-decoration: none;

    &.sui-bttn:hover {
      @include gradient-vertical($buttonTopGradient, $buttonBottomGradient);
      @include ms-gradient-vertical($buttonTopGradient, $buttonBottomGradient);
    }

    &.sui-bttn:active {
      box-shadow: none;
    }
  }
}

.sui-opt-in { // Because of stupid default & 'sui-opt-in' rules on 'ul'
.sui-dropdown_content {
  @extend %shared-dropdown-content-styles;

  &.is-hidden {
    display: none;
  }

  a {
    @extend %shared-dropdown-entry-styles;
  }

  li > a:hover,
  li > a.active,
  li.active > a {
    @extend %shared-dropdown-active-entry-styles;
  }

  .sui-dropdown_divider {
    @extend %shared-dropdown-divider-styles;
  }
}
}

/////////////////////////////////////////////////////
// Legacy Sui Dropdown
/////////////////////////////////////////////////////
.sui-bttn-group.sui-dropdown {
  display:inline-block;
}

.sui-dropdown-toggle:active,
.open .sui-dropdown-toggle {
  outline: 0;
}

.sui-dropdown .caret {
  @extend %shared-dropdown-caret-styles;
}

.sui-opt-in { // Because of stupid default & 'sui-opt-in' rules on 'ul'
.sui-dropdown-menu {
  @extend %shared-dropdown-content-styles;

  top: 100%;
  left: 0;
  float: left;
  display: none; // none by default, but block on "open" of the menu
  *border-right-width: 2px;
  *border-bottom-width: 2px;
  margin-left:0!important;
  // Allow for dropdowns to go bottom up (aka, dropup-menu)
  &.bottom-up {
    top: auto;
    bottom: 100%;
    margin-bottom: 2px;
  }

  // Dividers (basically an hr) within the dropdown
  .divider {
    @extend %shared-dropdown-divider-styles;
  }

  // Links within the dropdown menu
  a {
    @extend %shared-dropdown-entry-styles;
    clear: both;
  }
}
}

// Hover state
.sui-dropdown-menu li > a:hover,
.sui-dropdown-menu .active > a,
.sui-dropdown-menu .active > a:hover {
  @extend %shared-dropdown-active-entry-styles;
}

.sui-dropdown-menu li > a[data-selected=true],
.sui-dropdown-menu .active > a[data-selected=true],
.sui-dropdown-menu .active > a[data-selected=true] {
  text-decoration: none;
  background-color: $selectionColor;
}

// Open state for the dropdown
.sui-dropdown.open {
  .sui-dropdown-toggle.sui-bttn {
    @extend %shared-open-button-trigger-styles;
  }
  .sui-dropdown-menu {
    display: block;
  }
}

// Typeahead
.typeahead {
  margin-top: 2px; // give it some space to breathe
  @include border-radius(3px);
}
